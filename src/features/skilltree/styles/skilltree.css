/* Skill Tree Container - Sci-Fi/DNA Tech Aesthetic */

.skill-tree {
  position: relative;
  width: 100%;
  height: 600px;
  background: radial-gradient(ellipse at center, #0a1128 0%, #050816 100%);
  border: 2px solid rgba(59, 130, 246, 0.3);
  border-radius: 12px;
  overflow: visible; /* Allow tooltips to show outside */
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.5),
    inset 0 1px 0 rgba(255, 255, 255, 0.05),
    0 0 40px rgba(59, 130, 246, 0.2);
}

/* Background effects */
.skill-tree__background {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden; /* Clip particles/grid to container */
  border-radius: 12px;
}

.skill-tree__grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: gridMove 20s linear infinite;
}

@keyframes gridMove {
  0% {
    transform: translate(0, 0);
  }
  100% {
    transform: translate(50px, 50px);
  }
}

/* Floating particles */
.skill-tree__particles {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.skill-tree__particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: radial-gradient(circle, rgba(59, 130, 246, 0.8), transparent);
  border-radius: 50%;
  /* Animation properties split so inline animationDuration can override */
  animation-name: skillTreeParticleFloat;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  /* Duration is set inline per particle: 6-12s */
}

@keyframes skillTreeParticleFloat {
  0% {
    opacity: 0;
    transform: scale(0);
  }
  15% {
    opacity: 0.4;
    transform: scale(0.8);
  }
  25% {
    opacity: 0.8;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
  75% {
    opacity: 0.8;
    transform: scale(1);
  }
  85% {
    opacity: 0.4;
    transform: scale(0.8);
  }
  100% {
    opacity: 0;
    transform: scale(0);
  }
}

/* Nodes container */
.skill-tree__nodes {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 10;
}

/* DNA helix overlay */
.skill-tree__helix-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 2;
  opacity: 0.4;
}

/* Legend */
.skill-tree__legend {
  position: absolute;
  bottom: 16px;
  right: 16px;
  display: flex;
  gap: 16px;
  padding: 12px 16px;
  background: rgba(10, 17, 40, 0.9);
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: 8px;
  backdrop-filter: blur(10px);
  z-index: 100;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
}

.skill-tree__legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: #b0c4de;
  font-weight: 500;
}

.skill-tree__legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  box-shadow: 0 0 8px currentColor;
}

.skill-tree__legend-dot--locked {
  background: #374151;
  box-shadow: 0 0 4px #374151;
}

.skill-tree__legend-dot--unavailable {
  background: #dc2626;
  box-shadow: 0 0 8px #dc2626;
}

.skill-tree__legend-dot--available {
  background: #10b981;
  box-shadow: 0 0 8px #10b981;
  animation: legendPulse 2s ease-in-out infinite;
}

.skill-tree__legend-dot--maxed {
  background: #fbbf24;
  box-shadow: 0 0 8px #fbbf24;
}

@keyframes legendPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.2);
  }
}

/* Scanline effect */
.skill-tree::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    transparent 50%,
    rgba(59, 130, 246, 0.03) 50%
  );
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 1;
  animation: scanline 8s linear infinite;
}

@keyframes scanline {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(4px);
  }
}

/* Glow border effect */
.skill-tree::after {
  content: '';
  position: absolute;
  inset: -2px;
  background: linear-gradient(
    45deg,
    rgba(59, 130, 246, 0.5),
    rgba(168, 85, 247, 0.5),
    rgba(236, 72, 153, 0.5),
    rgba(59, 130, 246, 0.5)
  );
  border-radius: 12px;
  opacity: 0;
  z-index: -1;
  animation: borderGlow 3s ease-in-out infinite;
}

@keyframes borderGlow {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.6;
  }
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .skill-tree {
    height: 500px;
  }

  .skill-tree__legend {
    bottom: 8px;
    right: 8px;
    gap: 8px;
    padding: 8px 12px;
    flex-wrap: wrap;
  }

  .skill-tree__legend-item {
    font-size: 10px;
    gap: 4px;
  }

  .skill-tree__legend-dot {
    width: 8px;
    height: 8px;
  }
}

/* Zoom and pan controls (optional) */
.skill-tree--zoomable {
  cursor: grab;
}

.skill-tree--zoomable:active {
  cursor: grabbing;
}
/* Skill Node - Sci-Fi/DNA Tech Tree Styling */

.skill-node {
  position: absolute;
  width: 70px;
  height: 70px;
  transform: translate(-50%, -50%);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 10;
}

/* Increase z-index when hovering to show tooltip above other nodes */
.skill-node:hover {
  z-index: 200;
}

/* Hexagonal Border */
.skill-node__border {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.skill-node__hexagon {
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 0 8px currentColor);
}

.skill-node__hexagon-fill {
  fill: var(--node-bg, #0a1128);
  transition: fill 0.3s ease;
}

.skill-node__hexagon-stroke {
  fill: none;
  stroke: var(--node-border, #3b82f6);
  stroke-width: 2;
  transition: stroke 0.3s ease, stroke-width 0.3s ease;
}

/* Content */
.skill-node__content {
  position: absolute;
  inset: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 2px;
}

.skill-node__icon {
  font-size: 28px;
  line-height: 1;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
  transition: transform 0.3s ease;
}

.skill-node__level {
  font-size: 10px;
  font-weight: 700;
  color: #fff;
  background: rgba(59, 130, 246, 0.8);
  padding: 1px 4px;
  border-radius: 3px;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
}

.skill-node__lock {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  opacity: 0.9;
}

/* Glow Effect */
.skill-node__glow {
  position: absolute;
  inset: -10px;
  background: radial-gradient(circle, var(--node-glow, rgba(59, 130, 246, 0.4)) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  z-index: -1;
}

/* Particles - Orbital constellation effect for available nodes */
.skill-node__particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #10b981;
  border-radius: 50%;
  pointer-events: none;
  box-shadow: 0 0 6px #10b981, 0 0 10px #10b981;
  top: 50%;
  left: 50%;
}

/* Particle 1 - Close orbit */
.skill-node__particle--1 {
  animation: orbitClose 4s linear infinite;
}

/* Particle 2 - Medium orbit */
.skill-node__particle--2 {
  animation: orbitMedium 5s linear infinite;
  animation-delay: -1.7s;
}

/* Particle 3 - Far orbit */
.skill-node__particle--3 {
  animation: orbitFar 6s linear infinite;
  animation-delay: -3.3s;
}

/* Close orbit - tight circle around node */
@keyframes orbitClose {
  0% {
    transform: translate(-50%, -50%) rotate(0deg) translateX(38px) rotate(0deg);
    opacity: 0.9;
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg) translateX(38px) rotate(-360deg);
    opacity: 0.9;
  }
}

/* Medium orbit - moderate circle */
@keyframes orbitMedium {
  0% {
    transform: translate(-50%, -50%) rotate(0deg) translateX(45px) rotate(0deg);
    opacity: 0.7;
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg) translateX(45px) rotate(-360deg);
    opacity: 0.7;
  }
}

/* Far orbit - wide circle */
@keyframes orbitFar {
  0% {
    transform: translate(-50%, -50%) rotate(0deg) translateX(52px) rotate(0deg);
    opacity: 0.6;
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg) translateX(52px) rotate(-360deg);
    opacity: 0.6;
  }
}

/* Tooltip */
.skill-node__tooltip {
  position: absolute;
  bottom: calc(100% + 12px);
  left: 50%;
  transform: translateX(-50%) scale(0.8);
  min-width: 180px;
  max-width: 250px;
  background: linear-gradient(135deg, #0f1729 0%, #1a2942 100%);
  border: 2px solid var(--node-border, #3b82f6);
  border-radius: 8px;
  padding: 10px;
  opacity: 0;
  pointer-events: none;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 100;
  box-shadow:
    0 4px 20px rgba(0, 0, 0, 0.5),
    0 0 20px var(--node-glow, rgba(59, 130, 246, 0.3)),
    inset 0 1px 2px rgba(255, 255, 255, 0.1);
}

.skill-node:hover .skill-node__tooltip {
  opacity: 1;
  transform: translateX(-50%) scale(1);
  pointer-events: auto;
}

/* Tooltip below node for top nodes */
.skill-node--tooltip-bottom .skill-node__tooltip {
  bottom: auto;
  top: calc(100% + 12px);
}

.skill-node--tooltip-bottom:hover .skill-node__tooltip {
  opacity: 1;
  transform: translateX(-50%) scale(1);
  pointer-events: auto;
}

/* Tooltip to the right for left-edge nodes */
.skill-node--tooltip-right .skill-node__tooltip {
  bottom: 50%;
  left: calc(100% + 12px);
  transform: translateY(50%) scale(0.8);
}

.skill-node--tooltip-right:hover .skill-node__tooltip {
  opacity: 1;
  transform: translateY(50%) scale(1);
  pointer-events: auto;
}

/* Tooltip to the left for right-edge nodes */
.skill-node--tooltip-left .skill-node__tooltip {
  bottom: 50%;
  left: auto;
  right: calc(100% + 12px);
  transform: translateY(50%) translateX(0) scale(0.8);
}

.skill-node--tooltip-left:hover .skill-node__tooltip {
  opacity: 1;
  transform: translateY(50%) translateX(0) scale(1);
  pointer-events: auto;
}

.skill-node__tooltip-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
}

.skill-node__tooltip-icon {
  font-size: 18px;
  line-height: 1;
}

.skill-node__tooltip-name {
  font-size: 13px;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
}

.skill-node__tooltip-description {
  font-size: 11px;
  color: #b0c4de;
  margin-bottom: 6px;
  line-height: 1.3;
}

.skill-node__tooltip-cost {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  padding: 4px 6px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
  margin-bottom: 4px;
}

.skill-node__tooltip-cost-label {
  color: #94a3b8;
}

.skill-node__tooltip-cost-value {
  color: #fbbf24;
  font-weight: 600;
}

.skill-node__tooltip-progress {
  font-size: 10px;
  color: #3b82f6;
  text-align: center;
  font-weight: 600;
}

.skill-node__tooltip-locked {
  font-size: 10px;
  color: #ef4444;
  text-align: center;
  font-weight: 600;
  margin-top: 4px;
}

.skill-node__tooltip-maxed {
  font-size: 10px;
  color: #10b981;
  text-align: center;
  font-weight: 600;
  margin-top: 4px;
}

/* === STATE VARIANTS === */

/* Locked - Very dark, grayscale, almost invisible */
.skill-node--locked {
  --node-bg: #000000;
  --node-border: #1f2937;
  --node-glow: rgba(31, 41, 55, 0.1);
  opacity: 0.25;
  cursor: not-allowed;
}

.skill-node--locked .skill-node__icon {
  filter: grayscale(1) opacity(0.4);
}

.skill-node--locked .skill-node__hexagon {
  filter: drop-shadow(0 0 0px transparent);
}

/* Make tooltip more visible when hovering locked nodes */
.skill-node--locked:hover {
  opacity: 0.5;
  z-index: 200;
}

.skill-node--locked .skill-node__tooltip {
  opacity: 0;
  background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
  border-color: #ef4444;
}

.skill-node--locked:hover .skill-node__tooltip {
  opacity: 1 !important;
  transform: translateX(-50%) scale(1) !important;
}

/* Unavailable (can't afford) - Dimmed but shows category color */
.skill-node--unavailable {
  --node-bg: #0a1128;
  --node-border: var(--category-border, #3b82f6);
  --node-glow: var(--category-glow, rgba(59, 130, 246, 0.15));
  opacity: 0.6;
}

.skill-node--unavailable .skill-node__hexagon {
  filter: drop-shadow(0 0 3px currentColor);
}

.skill-node--unavailable .skill-node__icon {
  opacity: 0.8;
}

.skill-node--unavailable:hover {
  transform: translate(-50%, -50%) scale(1.05);
  opacity: 0.75;
}

/* Available (can afford!) - BRIGHT with pulsing glow */
.skill-node--available {
  --node-bg: #0f1a0f;
  --node-border: #10b981;
  --node-glow: rgba(16, 185, 129, 0.6);
}

.skill-node--available .skill-node__glow {
  opacity: 0.6;
  animation: availableGlow 2s ease-in-out infinite;
}

.skill-node--available:hover {
  transform: translate(-50%, -50%) scale(1.15);
}

.skill-node--available:hover .skill-node__glow {
  opacity: 1;
}

.skill-node--available:hover .skill-node__icon {
  transform: scale(1.1);
}

.skill-node--available:hover .skill-node__hexagon-stroke {
  stroke-width: 4;
}

.skill-node--available:active {
  transform: translate(-50%, -50%) scale(1.05);
}

/* Maxed - Golden/amber with sparkle */
.skill-node--maxed {
  --node-bg: #1a1a0f;
  --node-border: #fbbf24;
  --node-glow: rgba(251, 191, 36, 0.4);
}

.skill-node--maxed .skill-node__icon {
  filter: drop-shadow(0 0 10px #fbbf24);
  animation: maxedSparkle 3s ease-in-out infinite;
}

.skill-node--maxed .skill-node__hexagon-stroke {
  stroke-width: 3;
}

@keyframes availableGlow {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 1;
  }
}

@keyframes maxedSparkle {
  0%, 100% {
    filter: drop-shadow(0 0 10px #fbbf24);
  }
  50% {
    filter: drop-shadow(0 0 20px #fbbf24) drop-shadow(0 0 30px #fbbf24);
  }
}

/* === CATEGORY COLORS === */

.skill-node--click {
  --category-border: #ec4899; /* Pink */
  --category-glow: rgba(236, 72, 153, 0.4);
  --node-border: #ec4899;
  --node-glow: rgba(236, 72, 153, 0.4);
}

.skill-node--miner {
  --category-border: #8b7355; /* Brown */
  --category-glow: rgba(139, 115, 85, 0.4);
  --node-border: #8b7355;
  --node-glow: rgba(139, 115, 85, 0.4);
}

.skill-node--drill {
  --category-border: #6366f1; /* Indigo */
  --category-glow: rgba(99, 102, 241, 0.4);
  --node-border: #6366f1;
  --node-glow: rgba(99, 102, 241, 0.4);
}

.skill-node--global {
  --category-border: #3b82f6; /* Blue */
  --category-glow: rgba(59, 130, 246, 0.4);
  --node-border: #3b82f6;
  --node-glow: rgba(59, 130, 246, 0.4);
}

.skill-node--prestige {
  --category-border: #a855f7; /* Purple */
  --category-glow: rgba(168, 85, 247, 0.5);
  --node-border: #a855f7;
  --node-glow: rgba(168, 85, 247, 0.5);
}

/* === TIER SIZES === */

.skill-node--tier-1 {
  width: 60px;
  height: 60px;
}

.skill-node--tier-2 {
  width: 70px;
  height: 70px;
}

.skill-node--tier-3 {
  width: 80px;
  height: 80px;
}

.skill-node--tier-4 {
  width: 90px;
  height: 90px;
}

/* === ANIMATIONS === */

/* Mobile adjustments */
@media (max-width: 768px) {
  .skill-node {
    width: 60px;
    height: 60px;
  }

  .skill-node__icon {
    font-size: 24px;
  }

  .skill-node--tier-1 {
    width: 50px;
    height: 50px;
  }

  .skill-node--tier-2 {
    width: 60px;
    height: 60px;
  }

  .skill-node--tier-3 {
    width: 70px;
    height: 70px;
  }

  .skill-node--tier-4 {
    width: 80px;
    height: 80px;
  }

  .skill-node__tooltip {
    min-width: 160px;
  }
}
/* Skill Tree Connection Lines - DNA Helix Style */

.skill-connections {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.skill-connection {
  stroke-width: 3;
  stroke-linecap: round;
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  filter: url(#connection-glow);
}

/* Locked connections - gray and dashed */
.skill-connection--locked {
  stroke: rgba(75, 85, 99, 0.4);
  stroke-width: 2;
  opacity: 0.5;
}

/* Available connections - ready to unlock */
.skill-connection--available {
  stroke: rgba(59, 130, 246, 0.6);
  stroke-width: 2.5;
  opacity: 0.7;
  animation: connectionPulse 2s ease-in-out infinite;
}

/* Active connections - both nodes purchased */
.skill-connection--active {
  stroke: url(#connection-gradient-active);
  stroke-width: 3;
  opacity: 1;
  animation: connectionFlow 3s linear infinite;
}

@keyframes connectionPulse {
  0%, 100% {
    opacity: 0.7;
    stroke-width: 2.5;
  }
  50% {
    opacity: 1;
    stroke-width: 3;
  }
}

@keyframes connectionFlow {
  0% {
    stroke-dashoffset: 0;
  }
  100% {
    stroke-dashoffset: 20;
  }
}

/* Add flowing energy effect to active connections */
.skill-connection--active {
  stroke-dasharray: 10 10;
  animation: connectionFlow 1.5s linear infinite, connectionGlow 2s ease-in-out infinite;
}

@keyframes connectionGlow {
  0%, 100% {
    filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.8));
  }
  50% {
    filter: drop-shadow(0 0 8px rgba(168, 85, 247, 0.9));
  }
}
